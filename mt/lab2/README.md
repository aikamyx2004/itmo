# Лабораторная работа №2. Ручное построение нисходящих синтаксических анализаторов

Цель данной лабораторной работы — научиться разрабатывать грамматики для заданных неформально языков с учетом
семантического
смысла и приоритета операторов, разрабатывать лексические анализаторы, разрабатывать вручную нисходящие синтаксические
анализаторы,
разрабатывать подробные тестовые наборы для анализаторов.

## Вариант 1. Арифметические выражения

Арифметические выражения с операциями сложения, вычитания,
умножения, скобками, унарным минусом и унарными функциями. Приоритет операций стандартный. Скобки используются для
изменения приоритета и передачи аргументов в функции.
В качестве операндов выступают целые числа. Используйте один терминал для всех чисел. Любая последовательность букв
задает имя функции. Используйте один терминал для всех функций.
Пример: (1 + 2) * sin(-3 * (7 - 4) + 2)

## Грамматика

### Модификация

Вызов функции от произвольного количества аргументов

```
E -> T E';
E' -> + T E' | - T E' | epsilon;
T -> F T';
T' -> * F T' | epsilon;
F -> ( E ) | - F | FUNC F | n;
```

В модификации, мы хотим вместо "FUNC F" написать FUNC A, где А - это несколько аргументов.

Попробуем описать А: `A -> E | E , A`.
Тут явно есть левая рекурсия, нужно ее устранить.

```
FUNC F ===> FUNC (A)
F  -> FUNC (A) ....
A  -> E A';
A' -> , E A';
A' -> epsilon;
```

Итоговая грамматика:

```
E -> T E';
E' -> + T E' | - T E' | epsilon;
T -> F T';
T' -> * F T' | epsilon;
F -> ( E ) | - F | FUNC (A) | n;
A  -> E A';
A' -> , E A';
A' -> epsilon;
```

### Нетерминалы

| Нетерминал | Описание                                                                                     |
|------------|----------------------------------------------------------------------------------------------|
| E          | Арифметическое выражение.                                                                    |
| E'         | нетерминал с оператором сложения и вычитания.                                                |
| T          | терм, либо атомарное значение F, либо результат умножения.                                   |
| T'         | нетерминал с оператором умножения                                                            |
| F          | фактор --- это число, выражение в скобках, унарный минус, либо функция примененная к фактору |
| A          | аргументы функции                                                                            |
| A'         | запятая и оставшиеся аргументы функции, либо epsilon                                         |

## Терминалы

| Терминал | Токен    |
|----------|----------|
| (        | LPAREN   |
| )        | RPAREN   |
| $        | END      |
| +        | PLUS     |
| -        | MINUS    |
| *        | MULTIPLY |
| ,        | COMMA    |
| буквы    | FUNC     |
| число    | N        |

### First и Follow

|    | First         | Follow             |
|----|---------------|--------------------|
| E  | (, -, N, FUNC | ",", $, )          |
| T  | (, -, N, FUNC | ",", +, -, $, )    |
| F  | (, -, N, FUNC | ",", *, +, -, $, ) |
| E' | +, -, epsilon | ",", $, )          |
| T' | *, epsilon    | ",", +, -, $, )    |
| A  | (, -, N, FUNC | ",", )             |
| A' | ",", epsilon  | ",", )             |

Грамматика LL(1)

## Пример парсинга

Одно число: <br/>
![alt text](examples/number.png "number")<br/>
Одно отрицательное число: <br/>
![alt text](examples/negative.png "negative")<br/>
Одно число в скобках: <br/>
![alt text](examples/number-in-brackets.png "number-in-brackets")<br/>
sin 30: <br/>
![alt text](examples/sin.png "sin-30")<br/>
cos(60): <br/>
![alt text](examples/cos-in-brackets.png "cos(60)")<br/>
1 + 2: <br/>
![alt text](examples/add.png "add")<br/>
52 * 812: <br/>
![alt text](examples/mul.png "mul")<br/>
1 + 2 * 3:<br/>
![alt text](examples/add-mul.png "add-mul")<br/>
1 * 2 + 3:<br/>
![alt text](examples/mul-add.png "mul-add")<br/>
(1+2) * sin(-3*(7-4)+2):<br/>
![alt text](examples/example.png "example")<br/>

